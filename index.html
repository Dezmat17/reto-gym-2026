<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üèãÔ∏è Reto Masibros 2026</title>
<style>
/* ===== BASE ===== */
body { font-family: Arial, sans-serif; margin: 0; background: #111827; color: #e5e7eb; line-height: 1.6; transition: background 0.3s, color 0.3s; }

/* ===== MEN√ö ===== */
nav { display: flex; justify-content: center; align-items: center; background: rgba(31,41,51,0.95); padding: 12px 20px; position: sticky; top:0; z-index:100; box-shadow: 0 4px 12px rgba(0,0,0,0.3); transition: background 0.3s, box-shadow 0.3s, padding 0.3s; backdrop-filter: blur(6px);}
.menu-items { display: flex; justify-content: center; align-items: center; gap: 18px; flex-wrap: wrap; }
nav a { color: #fbbf24; text-decoration: none; font-weight: bold; font-size: 16px; transition: color 0.3s; }
nav a:hover { text-decoration: underline; }
#toggleDark { padding: 8px 22px; font-size: 20px; cursor: pointer; border: none; border-radius: 10px; font-weight: bold; transition: all 0.3s ease; }

/* ===== SECCIONES ===== */
section { background-color: #1f2933; color: #e5e7eb; margin: 20px; padding: 30px; border-radius: 8px; transition: background 0.3s, color 0.3s; opacity:0; transform: translateY(25px); }
section.visible { opacity:1; transform: translateY(0); transition: all 0.6s ease-out; }

h1 { text-align:center; font-size:48px; margin-bottom:10px; transition: color 0.3s; }
h2,h3 { text-align:center; color:#fbbf24; transition: color 0.3s; }
ul { max-width:600px; margin:auto; }
table { width:100%; max-width:700px; margin:auto; border-collapse:collapse; background-color:#1f2933; color:#e5e7eb; transition: background 0.3s, color 0.3s; }
th, td { border: 1px solid #555; padding: 10px; text-align:center; }
th { background-color:#111827; color:#fbbf24; }
.semanas-bar { position:relative; height:16px; background:#333; border-radius:8px; overflow:hidden; }
.semanas-bar span { display:block; height:100%; background:#fbbf24; border-radius:8px; width:0; transition: width 0.8s ease; }

/* ===== BOTONES ===== */
.boton { display:inline-block; margin:10px 8px; padding:12px 24px; font-size:16px; font-weight:bold; border-radius:10px; border:none; cursor:pointer; transition: all 0.3s ease; text-decoration:none; }
.boton:hover { transform: translateY(-2px); box-shadow:0 6px 12px rgba(0,0,0,0.15); }

/* ===== SPLASH ===== */
.splash {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  z-index: 9999;
  overflow: hidden;
  background: linear-gradient(135deg, #111827, #1f2933);
}

/* ===== HALO CENTRADO ===== */
.splash .halo {
  position: absolute;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(251,191,36,0.2) 0%, transparent 70%);
  border-radius: 50%;
  z-index: 0;
  animation: haloPulse 6s ease-in-out infinite alternate;
}

/* Animaci√≥n suave del halo */
@keyframes haloPulse {
  0% { transform: scale(0.9); opacity:0.2; }
  50% { transform: scale(1.05); opacity:0.15; }
  100% { transform: scale(0.9); opacity:0.2; }
}

/* ===== T√çTULO Y SUBT√çTULO ===== */
.splash h1, .splash p {
  position: relative;
  z-index: 1; /* por encima del halo */
  background: rgba(17,24,39,0.75);
  padding: 16px 28px;
  border-radius: 20px;
  display: inline-block;
  margin: 8px 0;
  animation: fadeZoom 1.2s ease-out forwards;
}

/* Subt√≠tulo ligeramente m√°s peque√±o */
.splash p {
  font-size: 20px;
  opacity: 0.85;
  animation: fadeZoom 1.4s ease-out forwards;
}

/* ===== ANIMACI√ìN DE ENTRADA SUAVE ===== */
@keyframes fadeZoom {
  0% { transform: scale(0.8); opacity:0; }
  60% { transform: scale(1.05); opacity:1; }
  100% { transform: scale(1); opacity:1; }
}

/* ===== MESES ===== */
.meses { display:flex; flex-wrap:wrap; justify-content:center; gap:18px; max-width:720px; margin:0 auto;}
.mes { width:160px; padding:18px 10px; border-radius:14px; text-decoration:none; font-weight:600; color:#fbbf24; background-color:#1f2933; text-align:center; box-shadow:0 6px 14px rgba(0,0,0,0.3); border:1px solid #333; transition: all 0.25s ease, background 0.3s, color 0.3s; }
.mes:hover { transform: translateY(-4px); box-shadow:0 10px 22px rgba(0,0,0,0.5); }

/* ===== PREMIOS ===== */
.premios { background-color:#1f2933; padding:25px; border-radius:12px; text-align:center; margin:20px auto; max-width:600px; box-shadow:0 6px 18px rgba(0,0,0,0.5); }
.premios ul li { font-size:20px; margin:12px 0; list-style:none; opacity:0; transform:translateX(-15px); transition: all 0.5s ease; }
.premios ul li.visible { opacity:1; transform:translateX(0);}
.premios .condicion { font-size:14px; opacity:0.7; display:block; margin-top:4px; }

/* ===== REGLAS FADE ===== */
.reglas-fade { text-align:center; opacity:0.7; margin-top:25px; font-size:14px; }

/* ===== MODO DIURNO/NOCTURNO ===== */
body.dark-mode { background-color:#111827; color:#e5e7eb; }
body.dark-mode section { background-color:#1f2933; color:#e5e7eb; }
body.dark-mode nav { background-color: rgba(31,41,51,0.95); }
body.dark-mode nav a { color:#fbbf24; }
body.dark-mode #toggleDark { background-color:#fbbf24; color:#111827; }
body.dark-mode .boton-cargar { background:#fbbf24; color:#111827; }
body.dark-mode .boton-seguimiento { background:#fbbf24; color:#111827; }
body.dark-mode h1, body.dark-mode h2, body.dark-mode h3 { color:#fbbf24; }

body.light-mode { background-color:#f4f4f4; color:#1f2933; }
body.light-mode section { background-color:#fff; color:#1f2933; }
body.light-mode nav { background-color:#fff; }
body.light-mode nav a { color:#111827; }
body.light-mode #toggleDark { background-color:#111827; color:#111827; }
body.light-mode .boton-cargar { background:#111827; color:#fff; }
body.light-mode .boton-seguimiento { background:#111827; color:#fff; }
body.light-mode .premios { background-color:#fff; color:#1f2933; border:1px solid #ccc; }
body.light-mode h1, body.light-mode h2, body.light-mode h3 { color:#1f2933; }

/* ===== AJUSTE PARA M√ìVIL ===== */
@media (max-width: 600px) {
  body { font-size:18px; }
  nav { padding:12px 8px; }
  nav a { font-size:18px; }
  #toggleDark { font-size:18px; padding:10px 14px; }
  section { margin:12px; padding:24px; }
  h1 { font-size:42px; }
  h2 { font-size:30px; }
  h3 { font-size:24px; }
  p, li { font-size:18px; }
  .boton { font-size:18px; padding:16px 26px; }
  .mes { width:95%; font-size:18px; padding:20px; }
  table { font-size:16px; }
  .premios ul { padding-left:0; margin:0 auto; text-align:center; }
  .premios .condicion { font-size:13px; }
}
.leader { animation: pulse 1.2s infinite; }
@keyframes pulse { 0%{ transform: scale(1);} 50%{ transform: scale(1.08);} 100%{ transform: scale(1);} }
</style>
</head>
<body class="dark-mode">

<!-- ===== SPLASH CORREGIDO ===== -->
<div class="splash">
  <div class="halo"></div> <!-- Halo centrado detr√°s del t√≠tulo -->
  <h1>üèãÔ∏è Reto Masibros 2026</h1>
  <p>Constancia ¬∑ Asado ¬∑ Disciplina</p>
</div>

<!-- ===== MEN√ö ===== -->
<nav>
  <div class="menu-items">
    <a href="#inicio">Inicio</a>
    <a href="#ranking">Ranking</a>
    <a href="#premios">Premios</a>
    <a href="#mensual">Meses</a>
    <a href="#reglas">Reglas</a>
    <button id="toggleDark">‚òÄÔ∏è</button>
  </div>
</nav>

<!-- ===== INICIO ===== -->
<section id="inicio">
  <h1>üèãÔ∏è Reto Masibros 2026</h1>
  <p style="text-align:center; font-size:18px;">üìÖ <strong>Del 1 de febrero al 1 de diciembre</strong></p>
  <p style="text-align:center;">Un desaf√≠o enfocado en la <strong>constancia saludable</strong>, priorizando descansos y evitando presi√≥n diaria.</p>
  <div style="text-align:center; margin-top:20px;">
    <a href="cargar.html" class="boton boton-cargar">üëâ Cargar entrenamiento</a>
  </div>
</section>

<!-- ===== RANKING ===== -->
<section id="ranking">
  <h2>üìä Ranking Anual</h2>
  <table id="tablaRanking">
    <tr><th>Nombre</th><th>D√≠as Totales</th><th>Semanas Cumplidas</th></tr>
  </table>
</section>

<!-- ===== REGISTRO MENSUAL ===== -->
<section id="mensual">
  <h2>üìä Registro Mensual</h2>
  <p style="text-align:center; font-size:18px;">Visualiz√° la asistencia mensual en formato calendario y resumen por persona.</p>
  <div style="text-align:center; margin-top:20px;">
    <a href="registro.html" class="boton boton-seguimiento">üìÖ Ver registro mensual</a>
  </div>
</section>

<!-- ===== PREMIOS ===== -->
<section class="premios" id="premios">
  <h2>üèÜ Premios del Reto</h2>
  <ul>
    <li>üí™ <strong>Master Chad:</strong> Le invitan el Asado. <span class="condicion">Condici√≥n: quien m√°s d√≠as asisti√≥ durante el a√±o.</span></li>
    <li>üíª <strong>Mucho LAG:</strong> Pagar la mitad del asado. <span class="condicion">Condici√≥n: asistencia intermedia, ni ganador ni √∫ltimo.</span></li>
    <li>ü¶ñ <strong>Trolazus Minimus:</strong> Pagar el resto del asado. <span class="condicion">Condici√≥n: quien menos d√≠as asisti√≥ durante el a√±o.</span></li>
    <li>üèÖ <strong>AFK MASTER:</strong> 1/4 de Luccianos pagado por todos. <span class="condicion">Condici√≥n: mayor cantidad de semanas cumplidas; si coincide con el ganador total, pasa al siguiente participante.</span></li>
  </ul>
</section>

<!-- ===== REGLAS ===== -->
<section id="reglas">
  <h2>üìú Reglas Generales</h2>
  <ul>
    <li>üèÜ El ganador: el que m√°s d√≠as haya asistido durante el a√±o</li>
    <li>üì∏ Dejar registro de asistencia en WhatsApp</li>
    <li>üéØ Semana cumplida: al menos 3 entrenamientos con foto</li>
    <li>üèÖ Premio Extra AFK MASTER: mayor cantidad de semanas cumplidas (si coincide con el ganador, pasa al siguiente)</li>
    <li>‚úÖ Mantener constancia durante todo el a√±o con descansos adecuados</li>
  </ul>
  <div class="reglas-fade">üìå El administrador del reto actualiza GitHub. El objetivo es sostener el h√°bito durante todo el a√±o.</div>
</section>

<script>
// Desaparece el splash despu√©s de 3s
setTimeout(() => { 
  document.querySelector('.splash').style.display='none'; 
}, 3000);

// ===== BOT√ìN MODO DIURNO/NOCTURNO =====
const toggle = document.getElementById("toggleDark");
const btnCargar = document.querySelector(".boton-cargar");
const btnMeses = document.querySelector(".boton-seguimiento");
const menuLinks = document.querySelectorAll('nav a');
toggle.addEventListener("click", () => {
  document.body.classList.toggle("light-mode");
  document.body.classList.toggle("dark-mode");
  toggle.textContent = document.body.classList.contains("dark-mode") ? "‚òÄÔ∏è" : "üåô";
  actualizarBotonesModo();
});
function actualizarBotonesModo() {
  if(document.body.classList.contains("dark-mode")){
    btnCargar.style.background = "#fbbf24"; btnCargar.style.color = "#111827";
    btnMeses.style.background = "#fbbf24"; btnMeses.style.color = "#111827";
    menuLinks.forEach(a=>a.style.color="#fbbf24");
  } else {
    btnCargar.style.background = "#111827"; btnCargar.style.color = "#fbbf24";
    btnMeses.style.background = "#111827"; btnMeses.style.color = "#fbbf24";
    menuLinks.forEach(a=>a.style.color="#111827");
  }
}
actualizarBotonesModo();

// ===== EFECTO SCROLL MENU =====
const nav = document.querySelector('nav');
window.addEventListener('scroll', ()=>{
  nav.style.padding = window.scrollY>20 ? "8px 20px" : "12px 20px";
});

// ===== EFECTO PREMIOS SECUENCIAL =====
const premiosItems = document.querySelectorAll('.premios ul li');
premiosItems.forEach((li,i)=>{ setTimeout(()=>{ li.classList.add('visible'); }, i*200); });

// ===== CARGAR RANKING SIMPLE =====
const PARTICIPANTES = ["Mati","Luca","Litox","Fran","Unyi"];
const URL_WEB_APP = "https://script.google.com/macros/s/AKfycbzFl9mIqMbcd6NbPIfkJwyqrKqPKVO1KtiEvyn0e5wRwJejY50f6boivwLlqPlq08lt/exec";
const tablaRanking = document.getElementById('tablaRanking');

async function cargarRanking(){
  try{
    const res = await fetch(URL_WEB_APP);
    const datos = await res.json();

    const resumen = {};
    PARTICIPANTES.forEach(nombre => resumen[nombre] = { diasTotales: 0, semanas: {} });

    datos.forEach(d => {
      const nombre = d.nombre; 
      if(!resumen[nombre]) return;

      resumen[nombre].diasTotales += 1;

      const fecha = new Date(d.fechaEntrenamiento);
      const day = fecha.getDay();
      const domingo = new Date(fecha);
      domingo.setDate(fecha.getDate() - day);
      const weekKey = `${domingo.getFullYear()}-${String(domingo.getMonth()+1).padStart(2,'0')}-${String(domingo.getDate()).padStart(2,'0')}`;

      if(!resumen[nombre].semanas[weekKey]) resumen[nombre].semanas[weekKey] = new Set();
      resumen[nombre].semanas[weekKey].add(fecha.getDate());
    });

    const rankingArray = PARTICIPANTES.map(nombre => {
      let semanasCumplidas = 0;
      Object.values(resumen[nombre].semanas).forEach(setDias => { if(setDias.size >= 3) semanasCumplidas += 1; });
      return { nombre, diasTotales: resumen[nombre].diasTotales, semanasCumplidas };
    });

    rankingArray.sort((a,b) => {
      if(b.semanasCumplidas !== a.semanasCumplidas) return b.semanasCumplidas - a.semanasCumplidas;
      return b.diasTotales - a.diasTotales;
    });

    // Limpiar tabla
    tablaRanking.querySelectorAll("tr:not(:first-child)").forEach(tr => tr.remove());

    // Renderizar simple con emojis
    rankingArray.forEach((p, index) => {
      let nombreDisplay = p.nombre;
      if(index === 0) nombreDisplay += " üèÜ"; // l√≠der
      if(index === rankingArray.length - 1) nombreDisplay += " üíÄ"; // √∫ltimo

      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${nombreDisplay}</td><td>${p.diasTotales}</td><td>${p.semanasCumplidas}</td>`;
      tablaRanking.appendChild(tr);
    });

  } catch(err){
    console.error("Error cargando ranking:", err);
  }
}

cargarRanking();

// ===== EFECTO SCROLL SECCIONES =====
const sections = document.querySelectorAll('section');
const observer = new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){ entry.target.classList.add('visible'); }
  });
},{threshold:0.2});
sections.forEach(sec=>observer.observe(sec));
</script>
</body>
</html>
