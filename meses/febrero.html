<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwzkM6tzSGDwtD061p0MfowSs33UJupjg5fn70jU0UvRWZ3rjQD1N3mc3WQw32dlgPV/exec";
const MES = "Febrero";

const form = document.getElementById("form");
const tabla = document.getElementById("tabla");

const nombre = document.getElementById("nombre");
const fecha = document.getElementById("fecha");
const entreno = document.getElementById("entreno");
const foto = document.getElementById("foto");
const comodin = document.getElementById("comodin");

form.addEventListener("submit", e => {
  e.preventDefault();

  const data = {
    mes: MES,
    nombre: nombre.value,
    fecha: fecha.value,
    entreno: entreno.value,
    foto: foto.value,
    comodin: comodin.value
  };

  const params = new URLSearchParams(data);

  fetch(API_URL, {
    method: "POST",
    body: params
  })
  .then(res => res.text())
  .then(() => {
    form.reset();
    cargarDatos();
  })
  .catch(err => console.error("Error:", err));
});

function cargarDatos() {
  fetch(API_URL)
    .then(res => res.json())
    .then(data => {
      tabla.innerHTML = "";
      data
        .filter(row => row.Mes === MES)
        .forEach(row => {
          tabla.innerHTML += `
            <tr>
              <td>${row.Nombre}</td>
              <td>${row.Fecha}</td>
              <td>${row.Entro}</td>
              <td>${row.Foto}</td>
              <td>${row.Comodin}</td>
            </tr>
          `;
        });
    });
}

cargarDatos();
</script>
